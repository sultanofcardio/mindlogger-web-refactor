const __vite__fileDeps=["assets/index-Cy5xogzQ.js","assets/index-BMwGXOHN.js","assets/LaunchDarklyProvider-3c5FlTCa.js","assets/LaunchDarklyProvider-5LBnV35H.css","assets/index-wo7NT2Vv.js","assets/index-CGhdypXm.js","assets/index-DoRMT53w.js","assets/index-CdH1m60U.js","assets/index-ChvoyFmb.js","assets/index-BhhNTH8T.js","assets/signup.schema-DH0eMdIG.js","assets/Invitation-8tbQx8Mj.js","assets/index-DBB3zRNu.js","assets/index-BGpU_ydV.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{p as A,m as L,o as N,r as u,k,_ as T,b as x,j as e,c as E,q as R,L as Q,E as j}from"./index-BMwGXOHN.js";import{P as q,u as G,a as X,M as Y,b as Z,R as l,c as ee,d as te,S as se,A as U,e as M,f as oe,C as B,B as ae,I as _,g as S,D as ne,h as F,i as re,L as ie,H as ce,F as de,j as le,k as pe}from"./index-DoRMT53w.js";import{B as i,T as g,a as me,M as V,u as P,b as D,c as W,i as ue,z as y,D as f,d as xe,e as ge,f as he,g as $,N as H,O as fe,R as je,h as d}from"./LaunchDarklyProvider-3c5FlTCa.js";import{s as z}from"./isContainsSpaces-CSoBuoo8.js";import{D as Ce,u as we,i as ve,S as ye}from"./index-CGhdypXm.js";const Pe=(s,t=2)=>s.split(" ").map(o=>o.charAt(0)).join("").slice(0,t);function Ie(s){return A("MuiCard",s)}L("MuiCard",["root"]);const be=["className","raised"],Me=s=>{const{classes:t}=s;return R({root:["root"]},Ie,t)},_e=N(q,{name:"MuiCard",slot:"Root",overridesResolver:(s,t)=>t.root})(()=>({overflow:"hidden"})),Se=u.forwardRef(function(t,o){const a=k({props:t,name:"MuiCard"}),{className:n,raised:c=!1}=a,p=T(a,be),r=x({},a,{raised:c}),m=Me(r);return e.jsx(_e,x({className:E(m.root,n),elevation:c?8:void 0,ref:o,ownerState:r},p))});function Ae(s){return A("MuiCardContent",s)}L("MuiCardContent",["root"]);const Le=["className","component"],Ne=s=>{const{classes:t}=s;return R({root:["root"]},Ae,t)},ke=N("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(s,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Te=u.forwardRef(function(t,o){const a=k({props:t,name:"MuiCardContent"}),{className:n,component:c="div"}=a,p=T(a,Le),r=x({},a,{component:c}),m=Ne(r);return e.jsx(ke,x({as:c,className:E(m.root,n),ownerState:r,ref:o},p))});function Ee(s){return A("MuiCardMedia",s)}L("MuiCardMedia",["root","media","img"]);const Re=["children","className","component","image","src","style"],De=s=>{const{classes:t,isMediaComponent:o,isImageComponent:a}=s;return R({root:["root",o&&"media",a&&"img"]},Ee,t)},Oe=N("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s,{isMediaComponent:a,isImageComponent:n}=o;return[t.root,a&&t.media,n&&t.img]}})(({ownerState:s})=>x({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},s.isMediaComponent&&{width:"100%"},s.isImageComponent&&{objectFit:"cover"})),Be=["video","audio","picture","iframe","img"],$e=["picture","img"],ze=u.forwardRef(function(t,o){const a=k({props:t,name:"MuiCardMedia"}),{children:n,className:c,component:p="div",image:r,src:m,style:w}=a,I=T(a,Re),h=Be.indexOf(p)!==-1,C=!h&&r?x({backgroundImage:`url("${r}")`},w):w,v=x({},a,{component:p,isMediaComponent:h,isImageComponent:$e.indexOf(p)!==-1}),b=De(v);return e.jsx(Oe,x({className:E(b.root,c),as:p,role:!h&&r?"img":void 0,ref:o,style:C,ownerState:v,src:h?r||m:void 0},I,{children:n}))}),Ue=({id:s,title:t,description:o,imageSrc:a,onClick:n})=>e.jsxs(Se,{id:s,onClick:n,"data-testid":"custom-card",sx:{width:"280px",minHeight:"390px",margin:"20px",cursor:"pointer",boxShadow:"0 3px 1px -2px rgb(0 0 0 / 20%), 0 2px 2px 0 rgb(0 0 0 / 14%), 0 1px 5px 0 rgb(0 0 0 / 12%)"},children:[e.jsx(i,{width:280,height:280,"data-testid":"custom-card-media-block",children:a?e.jsx(ze,{component:"img",height:"280px",width:"280px",image:a,alt:"Applet Logo","data-testid":"custom-card-image"}):e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"93px",width:280,height:280,color:"white","data-testid":"custom-card-image-replacement",bgcolor:"rgb(119, 119, 119)",fontFamily:"Atkinson",children:Pe(t)})}),e.jsxs(Te,{"data-testid":"custom-card-content-block",children:[e.jsx(g,{gutterBottom:!0,variant:"h1",fontSize:"20px",sx:{wordBreak:"break-word","&:hover":{textDecoration:"underline"}},testid:"custom-card-title",children:t}),e.jsx(g,{variant:"body2",color:"text.secondary",testid:"custom-card-description",children:o})]})]}),Fe=s=>G(["updatePassword"],me.updatePassword,{...s});function Ve(s){return s?s.map(t=>({id:t.id,displayName:t.displayName,description:t.description,about:t.about,watermark:t.watermark,image:t.image})):[]}const We=({applet:s})=>{const t=X(),o=()=>(V.track({action:Y.AppletClick,[Z.AppletId]:s.id}),t.navigate(l.appletDetails.navigateTo(s.id)));return e.jsx(i,{"data-testid":"applet-card",children:e.jsx(Ue,{id:s.id,title:s.displayName,description:s.description,imageSrc:s.image,onClick:o})})},He=s=>e.jsx(i,{display:"flex",flex:1,flexWrap:"wrap",justifyContent:"center","data-testid":"applet-list",children:s.applets.map(t=>e.jsx(We,{applet:t},t.id))}),Je=(s,t)=>ee([`appletList/${s.userId}`],te.getAll,{...t}),Ke=()=>{const{t:s}=P(),{user:t}=D(),{data:o,isLoading:a,isError:n,error:c}=Je({userId:t.id??""},{select:r=>{var m;return Ve((m=r==null?void 0:r.data)==null?void 0:m.result)}}),p=!(o!=null&&o.length);return a?e.jsx(Q,{}):n?e.jsx(i,{display:"flex",flex:1,alignItems:"center",justifyContent:"center",children:e.jsx("span",{children:c.evaluatedMessage})}):p?e.jsx(i,{display:"flex",flex:1,alignItems:"center",justifyContent:"center",children:e.jsx(g,{variant:"body1",children:s("noApplets")})}):e.jsx(He,{applets:o})};function Qe(){return u.useEffect(()=>{V.trackPageView("Dashboard")},[]),e.jsx(Ke,{})}function qe(){const[s]=W(),t=s.get("appletId"),o=s.get("activityId"),a=s.get("eventId"),n=s.get("flowId"),c=s.get("targetSubjectId");return!t||!o||!a?e.jsx("div",{children:"Invalid URL"}):e.jsx(se,{appletId:t,activityId:o,eventId:a,flowId:n,targetSubjectId:c,publicAppletKey:null})}const Ge=u.lazy(()=>j(()=>import("./index-Cy5xogzQ.js"),__vite__mapDeps([0,1,2,3])));function Xe(){const{t:s}=P({keyPrefix:"Profile"}),{user:t}=D();return e.jsx(i,{flex:1,textAlign:"center",margin:"24px 0px",children:e.jsxs(i,{margin:"0 auto",maxWidth:"800px",padding:"0px 12px",children:[e.jsxs(i,{display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(i,{sx:{padding:"15px"},children:e.jsx(U,{name:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`,height:"40px",width:"40px"})}),e.jsx(g,{variant:"h4",children:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`})]}),e.jsx("hr",{}),e.jsx(g,{variant:"body1",sx:{cursor:"default"},children:s("description")}),ue&&e.jsx(Ge,{})]})})}const J=()=>{const{t:s,i18n:t}=P({keyPrefix:"ChangePassword"});return{t:s,i18n:t}},Ye=y.object({old:y.string().trim().min(6,{message:f.validation.password.minLength}),new:y.string().trim().min(6,{message:f.validation.password.minLength}).refine(s=>!z(s),{message:f.validation.password.shouldNotContainSpaces}),confirm:y.string().trim().min(6,{message:f.validation.password.minLength}).refine(s=>!z(s),{message:f.validation.password.shouldNotContainSpaces})}).refine(s=>s.new===s.confirm,{message:f.validation.password.notMatch,path:["confirm"]}),Ze=({title:s})=>{const{t}=J(),[o,a]=M(),[n,c]=M(),[p,r]=M(),m=oe({defaultValues:{old:"",new:"",confirm:""}},Ye),{handleSubmit:w,reset:I}=m,{mutate:h,error:C,isLoading:v,isSuccess:b}=Fe({onSuccess(){I()}}),K=O=>h({password:O.new,prev_password:O.old});return e.jsx(B,{className:"change-password-form-container",children:e.jsx(ae,{...m,onSubmit:w(K),children:e.jsxs(i,{display:"flex",flexDirection:"column",gap:"24px",children:[e.jsx(B,{className:"overflow-hidden",children:e.jsx("p",{children:s})}),e.jsx(_,{id:"change-password-form-old-password",type:o,name:"old",placeholder:t("oldPassword")||"",autoComplete:"current-password",Icon:e.jsx(S,{isSecure:o==="password",onClick:a})}),e.jsx(_,{id:"change-password-form-new-password",type:n,name:"new",placeholder:t("newPassword")||"",autoComplete:"new-password",Icon:e.jsx(S,{isSecure:n==="password",onClick:c})}),e.jsx(_,{id:"change-password-form-confirm-password",type:p,name:"confirm",placeholder:t("confirmPassword")||"",autoComplete:"new-password",Icon:e.jsx(S,{isSecure:p==="password",onClick:r})}),e.jsx(ne,{errorMessage:C==null?void 0:C.evaluatedMessage,successMessage:b?t("success"):null}),e.jsx(xe,{type:"submit",variant:"contained",isLoading:v,text:t("submit")})]})})})};function et(){const{t:s}=J(),{user:t}=D();return e.jsx(i,{display:"flex",flex:1,justifyContent:"center",alignItems:"center",textAlign:"center",children:e.jsxs(i,{margin:"24px 0px",padding:"0px 12px",children:[e.jsxs(i,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:[e.jsx(i,{sx:{padding:"0px 15px"},children:e.jsx(U,{name:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`,width:"40px",height:"40px"})}),e.jsx(g,{variant:"h6",sx:{marginBottom:"8px"},children:s("settings",{name:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`})})]}),e.jsx(Ce,{sx:{backgroundColor:"rgba(0,0,0, 0.5)",marginTop:"8px",marginBottom:"24px"}}),e.jsxs(i,{display:"flex",alignItems:"center",flexDirection:"column",children:[e.jsx(g,{variant:"h5",color:ge.colors.light.primary,children:s("settingsTitle")}),e.jsx(Ze,{title:s("formTitle",{email:t==null?void 0:t.email})})]})]})})}const tt=({children:s})=>{const{logout:t}=F(),o=we({events:ve,timerName:"InactivityTracker"});return u.useEffect(()=>{const a={hours:0,minutes:15},n=o.createListener(a,t);return o.start(n),()=>{o.stop(n)}},[]),s};function st(){const{t:s}=P(),{appletId:t,activityId:o,eventId:a,entityType:n}=he(),[c]=W(),r=n==="flow"?c.get("flowId"):null,m=c.get("targetSubjectId");return!t||!o||!a?e.jsx("div",{children:s("wrondLinkParametrError")}):e.jsx(i,{display:"flex",flex:1,children:e.jsx(ye,{appletId:t,activityId:o,eventId:a,flowId:r,targetSubjectId:m,publicAppletKey:null})})}function ot({children:s}){const{logout:t}=F();return u.useEffect(()=>($.on("onLogout",t),()=>{$.off("onLogout",t)}),[t]),s}function at({redirectUrl:s=l.login.path,token:t}){return t?e.jsx(tt,{children:e.jsx(fe,{})}):e.jsx(H,{to:s,replace:!0})}const nt=u.lazy(()=>j(()=>import("./index-wo7NT2Vv.js"),__vite__mapDeps([4,1,2,3,5,6]))),rt=u.lazy(()=>j(()=>import("./index-CdH1m60U.js"),__vite__mapDeps([7,1,6,2,3]))),it=u.lazy(()=>j(()=>import("./index-ChvoyFmb.js"),__vite__mapDeps([8,1,2,3,6,9,10,11]))),ct=u.lazy(()=>j(()=>import("./index-DBB3zRNu.js"),__vite__mapDeps([12,1,2,3,6,11,9,10]))),dt=u.lazy(()=>j(()=>import("./index-BGpU_ydV.js"),__vite__mapDeps([13,1,2,3,9,6,10])));function gt({refreshToken:s}){return e.jsx(ot,{children:e.jsxs(je,{children:[e.jsxs(d,{element:e.jsx(at,{token:s}),children:[e.jsx(d,{path:l.survey.path,element:e.jsx(st,{})}),e.jsx(d,{path:l.publicSurvey.path,element:e.jsx(nt,{})}),e.jsx(d,{path:l.autoCompletion.path,element:e.jsx(qe,{})}),e.jsx(d,{path:l.publicAutoCompletion.path,element:e.jsx(re,{})}),e.jsxs(d,{element:e.jsx(ie,{header:e.jsx(ce,{}),footer:e.jsx(de,{})}),children:[e.jsx(d,{path:l.appletList.path,element:e.jsx(Qe,{})}),e.jsx(d,{path:l.appletDetails.path,element:e.jsx(le,{})}),e.jsx(d,{path:l.profile.path,element:e.jsx(Xe,{})}),e.jsx(d,{path:l.settings.path,element:e.jsx(et,{})}),e.jsx(d,{path:l.invitation.path,element:e.jsx(it,{})}),e.jsx(d,{path:l.privateJoin.path,element:e.jsx(ct,{})}),e.jsx(d,{path:l.publicJoin.path,element:e.jsx(rt,{})}),e.jsx(d,{path:l.transferOwnership.path,element:e.jsx(dt,{})})]})]}),e.jsx(d,{path:l.login.path,element:e.jsx(pe,{})}),e.jsx(d,{path:"*",element:e.jsx(H,{to:l.appletList.path})})]})})}export{gt as default};
