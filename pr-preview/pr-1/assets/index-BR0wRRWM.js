import{j as t,L as f}from"./index-iuE2XUfD.js";import{a3 as v,l as x,B as a,d as m,M as h,f as g,m as y}from"./LaunchDarklyProvider-DZRUnlz_.js";import{c as P,u as B,M as A,b as M,R as j,aQ as L,G as C}from"./index-CZL7y8-_.js";import{u as l,I as D}from"./Invitation-CAiT-wyU.js";import{i as I,P as b,A as S}from"./index-uoSvyVcv.js";import"./signup.schema-Ch9EpRU0.js";const k=(n,e)=>P(["privateInvitationDetails",{invitationId:n}],()=>I.getPrivateInvitationById({invitationId:n}),e),E=n=>B(["privateAcceptInvitation"],I.acceptPrivateInvitation,{...n}),w=({invitationKey:n,appletId:e})=>{const{t:i}=l(),s=v(),{addSuccessBanner:r}=x(),{mutate:c,isLoading:o}=E({onSuccess(){return r(i("invitationAccepted")),h.track({action:A.InvitationAccepted,[M.AppletId]:e}),s(j.appletList.path)}}),u=()=>c({invitationId:n});return t.jsx(a,{width:"250px",children:t.jsx(m,{type:"button",variant:"contained",color:"success",onClick:u,isLoading:o,text:i("buttons.acceptInvitation")})})},J=()=>{const{t:n}=l(),e=v(),{addErrorBanner:i}=x(),s=()=>(i(n("invitationDeclined")),e(j.appletList.path));return t.jsx(a,{width:"250px",children:t.jsx(m,{type:"button",onClick:s,variant:"contained",color:"error",text:n("buttons.declineInvitation")})})},Q=({keyParams:n,redirectState:e})=>{var d;const{t:i}=l(),{isAuthenticated:s}=L(),{lessThanSM:r}=C(),{isError:c,data:o,isLoading:u}=k(n);if(c)return t.jsx(b,{message:i("notFound")});if(u)return t.jsx(a,{display:"flex",flex:1,justifyContent:"center",alignItems:"center",flexDirection:"column",children:t.jsxs(a,{children:[t.jsx("div",{className:"loading",children:i("loadingInvitation")}),t.jsx(f,{})]})});const p=(d=o==null?void 0:o.data)==null?void 0:d.result;return t.jsx(D,{invite:p,isUserAuthenticated:s,actionComponent:t.jsx(a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",children:s?t.jsxs(a,{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",margin:"16px 0px",flexDirection:r?"column":"row",children:[t.jsx(w,{invitationKey:n,appletId:p.appletId}),t.jsx(J,{})]}):t.jsx(S,{redirectState:e})})})};function N(){const{joinLinkKey:n}=g(),e=y(),i={backRedirectPath:`${e.pathname}${e.search}`};return t.jsx(a,{display:"flex",flex:1,margin:"24px",children:n&&t.jsx(Q,{keyParams:n,redirectState:i})})}export{N as default};
